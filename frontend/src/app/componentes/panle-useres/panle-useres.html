 <div class="card shadow-sm">
    <div
        class="card-header bg-white d-flex justify-content-between align-items-center">
        <strong class="fs-6">Users</strong>

        <div class="dropdown">
            <button
                class="btn btn-outline-secondary btn-sm dropdown-toggle"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false">
                <i class="bi bi-funnel me-1"></i> Filter
            </button>

            <ul class="dropdown-menu dropdown-menu-end">
                <li>
                    <button class="dropdown-item"
                        (click)="filterByStatus('')">
                        All users
                    </button>
                </li>
                <li>
                    <button class="dropdown-item"
                        (click)="filterByStatus('active')">
                        Active
                    </button>
                </li>
                <li>
                    <button class="dropdown-item"
                        (click)="filterByStatus('banned')">
                        Banned
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-hover mb-0">
            <thead class="table-light">
                <tr>
                    <th>Avatar</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th class="text-end">Actions</th>
                </tr>
            </thead>
            <tbody>
                @for (u of filteredUser(); track u.id) {
                <tr>
                    <td [routerLink]="['/profile',u.username]">
                        @if (u.avatart) {
                        <img [src]="url+u.avatart" width="40" height="40"
                            class="profile-avatar">
                        }@else {
                        <div class="avatar-user">
                            {{u.username.at(0)?.toLocaleUpperCase()}}
                        </div>
                        }
                    </td>
                    <td>{{ u.username }}</td>
                    <td>{{ u.email }}</td>
                    <td>

                        @if (u.status) {
                        <i
                            class="'bi bi-circle-fill text-success"></i>
                        }@else {
                        <i
                            class="'bi bi-circle-fill text-danger "></i>
                        }
                    </td>
                    <td class="text-end">
                        @if (u.status) {
                        <i class="op bi bi-ban me-3"
                            title="bane"
                            (click)="selectBaneUser(u)"></i>
                        }@else {
                        <i
                            class="bi bi-check-circle-fill op text-success me-3"
                            title="active" (click)="selectActiveUser(u)"></i>
                        }
                        <i class="op bi bi-trash-fill text-danger me-3"
                            title="delet"
                            (click)="selectDeletUser(u)"></i>

                    </td>

                </tr>
                }
                @empty {
                <tr>
                    <td colspan="5" class="text-center text-muted">
                        No users found
                    </td>
                </tr>
                }
            </tbody>

        </table>
        @if (showActivetion()) {
                 <app-bane message="Do you want to Active this user?"
            (react)="activeUser($event)"></app-bane>
        }
        @if (showBanConfirmatiom()) {
        <app-bane message="Do you want to bane this user?"
            (react)="banUser($event)"></app-bane>
        }
        @if (showDeletConfirmatiom()) {
        <app-confermation message="Do you want to remove this user?"
            (react)="deleteUser($event)"></app-confermation>
        }

    </div>

</div>